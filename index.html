<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <title>åå¤å±‹ 8 å¤© 7 å¤œ è¦ªå­è‡ªé§•éŠ</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
      tailwind.config = {
        theme: {
          extend: {
            colors: {
              ghibli: {
                cream: '#f4f1ea',
                green: '#4a6c48',
                greenLight: '#8da38b',
                orange: '#e89e70',
                brown: '#5c4839',
                blue: '#7da6bd'
              }
            },
            fontFamily: {
              sans: ['"Hiragino Kaku Gothic ProN"', '"Noto Sans TC"', 'sans-serif'],
            }
          }
        }
      }
    </script>

    <!-- React & Babel Setup -->
    <!-- Import Map for handling modules without build tools -->
    <script type="importmap">
    {
      "imports": {
        "react": "https://esm.sh/react@18.2.0",
        "react-dom": "https://esm.sh/react-dom@18.2.0",
        "react-dom/client": "https://esm.sh/react-dom@18.2.0/client",
        "lucide-react": "https://esm.sh/lucide-react@0.344.0",
        "recharts": "https://esm.sh/recharts@2.12.2?external=react,react-dom"
      }
    }
    </script>
    <!-- Babel for in-browser JSX transformation -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <style>
      body {
        background-color: #f4f1ea;
        color: #5c4839;
        -webkit-font-smoothing: antialiased;
      }
      .no-scrollbar::-webkit-scrollbar { display: none; }
      .no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }
      
      @keyframes fadeIn {
        from { opacity: 0; transform: translateY(10px); }
        to { opacity: 1; transform: translateY(0); }
      }
      .animate-fade-in {
        animation: fadeIn 0.5s ease-out forwards;
      }
    </style>
</head>
<body>
    <div id="root"></div>

    <!-- Main Application Logic -->
    <script type="text/babel" data-type="module">
      import React, { useState, useEffect } from 'react';
      import { createRoot } from 'react-dom/client';
      import { 
        Sun, Cloud, Snowflake, CloudRain, 
        MapPin, Utensils, AlertCircle, Plane, Bed, Wallet, 
        ChevronLeft, Calendar, Info, Navigation, ArrowRight,
        ShoppingBag, Footprints, Store, Ticket, Table, TrainFront, Map,
        CheckCircle, XCircle, Clock, Banknote, ClipboardCheck
      } from 'lucide-react';
      import { PieChart, Pie, Cell, ResponsiveContainer, Tooltip } from 'recharts';

      // --- Constants & Data ---
      
      const ITINERARY_DATA = [
        {
          id: 1,
          dateLabel: "D1",
          title: "æŠµé”åå¤å±‹ãƒ»å…¥ä½æ—¥",
          weather: { temp: "10Â°C / 4Â°C", condition: "å¤šé›²æ™‚æ™´", icon: 'cloud' },
          highlights: ["ä¸­éƒ¨åœ‹éš›æ©Ÿå ´", "åéµ ÂµSKY", "å‘³ä»™æ‹‰éºµ", "ä¾¿åˆ©å•†åº—å‚™æ¡ˆ"],
          schedule: [
            { time: "17:15", title: "å°ç£ â†’ åå¤å±‹", description: "ä¸­éƒ¨åœ‹éš›æ©Ÿå ´ (NGO)", important: "ç¢ºä¿å¨ƒå¨ƒè»Šã€è¡Œææ¨™ç±¤", type: "transport" },
            { time: "20:50", title: "æŠµé” & å…¥å¢ƒ", description: "å¤œé–“èˆªç­äººæ½®ä¸å¤šï¼Œé€šé—œç´„ 30-40 åˆ†é˜", type: "transport" },
            { time: "21:40", title: "åéµ ÂµSKY è³¼ç¥¨", description: "å»ºè­°ç¾å ´è²·ç¥¨ (çª—å£å¯è²·å…’ç«¥åº§ä½ç¥¨)", important: "å»ºè­°å»äººå·¥æ«ƒå°", type: "transport" },
            { time: "22:00", title: "æ­ ÂµSKY â†’ åå¤å±‹ç«™", description: "ç›´é” 28 åˆ†é˜ (é©åˆå¸¶å°å­©ä¸æ›è»Š)", important: "è‹¥å­©å­æœƒç¡è‘—ï¼Œå»ºè­°è²·å…’ç«¥æŒ‡å®šå¸­", type: "transport" },
            { time: "22:45", title: "é£¯åº— Check-in", description: "Daiwa Roynet æ–°å¹¹ç·šå£ (æ­¥è¡Œ3-5åˆ†é˜)", important: "å¯è«‹é£¯åº—æä¾›å…’ç«¥å‚™å“", type: "visit", navLink: "Daiwa Roynet Hotel Nagoya Taiko dori Side" },
          ],
          food: [
            { name: "å‘³ä»™ (ä¸»é¸)", type: "å°å¼æ‹‰éºµ", price: "Â¥1,000~", features: ["å¯é»ä¸è¾£", "ç‚’é£¯", "é’èœ"], isPrimary: true, navLink: "å‘³ä»™ åå¤å±‹é§…å‰åº—" },
            { name: "ä¸–ç•Œã®å±±ã¡ã‚ƒã‚“", type: "æ›¿ä»£æ–¹æ¡ˆ", price: "Â¥1,200~", features: ["æ‹›ç‰Œé›ç¿…", "ä¸²ç‡’"], isPrimary: false, navLink: "ä¸–ç•Œçš„å±±ã¡ã‚ƒã‚“ åé§…åº—" },
            { name: "ä¾¿åˆ©å•†åº— (å‚™æ¡ˆ)", type: "FamilyMart/Lawson", price: "å®µå¤œ", features: ["é£¯ç³°", "ç‚¸é›ä¸²", "ç”œé»"], isPrimary: false, navLink: "åå¤å±‹é§… æ–°å¹¹ç·šå£ ä¾¿åˆ©å•†åº—" },
          ],
          tips: ["ÂµSKY: è‹¥å­©å­æœƒç¡è‘—ï¼Œå»ºè­°è²·å…’ç«¥æŒ‡å®šå¸­ã€‚", "è‹¥å°å­©å¤ªç´¯ï¼Œå»ºè­°ç›´æ¥åƒä¾¿åˆ©å•†åº—+æ—©ä¼‘æ¯ã€‚", "é£¯åº—ä½æ–¼æ–°å¹¹ç·šå£(å¤ªé–¤é€šå£)ï¼Œå‡ºç«™æ­¥è¡Œç´„ 4 åˆ†é˜ã€‚"]
        },
        {
          id: 2,
          dateLabel: "D2",
          title: "æ¨‚é«˜æ¨‚åœ’ LEGOLAND",
          weather: { temp: "12Â°C / 5Â°C", condition: "æ™´æœ—", icon: 'sun' },
          highlights: ["LEGO NINJAGO", "Submarine Adventure", "Miniland"],
          schedule: [
            { time: "09:30", title: "å…¥åœ’", description: "æ­ä¹˜ã‚ãŠãªã¿ç·šè‡³é‡‘åŸãµé ­ç«™ (å»ºè­°è²·ä¸€æ—¥åˆ¸)", type: "visit" },
            { time: "09:30-11:30", title: "ç¬¬ä¸€è¼ª (äººæ°£æœ€é«˜)", description: "Ninjago, Submarine, Lost Kingdom", type: "visit" },
            { time: "11:30-12:00", title: "ä¼‘æ¯ & æ‹ç…§", description: "MiniLand (å®¤å…§æ¶¼çˆ½)", type: "rest" },
            { time: "13:00-15:30", title: "ç¬¬äºŒè¼ª (å½ˆæ€§)", description: "Driving School (4æ­²æ„›), Duplo Play", type: "visit" },
            { time: "16:00-17:00", title: "ç¬¬ä¸‰è¼ª (è¼•é¬†)", description: "Pirate Splash Battle, Build & Test", type: "visit" },
            { time: "17:00", title: "é›¢åœ’", description: "è²·å°ç‰©+æ‹ç…§", type: "transport" },
          ],
          food: [
            { name: "Brick House Burger", type: "åˆé¤(é€ å‹)", price: "Â¥1,200~", features: ["æ¨‚é«˜é€ å‹æ¼¢å ¡"], isPrimary: true },
            { name: "Coral Reef Pizza", type: "åˆé¤(åƒåˆ°é£½)", price: "Â¥1,800~", features: ["ç¾©å¤§åˆ©éºµ/æŠ«è–©", "å…’ç«¥æœ€æ„›"], isPrimary: false },
            { name: "Chicken Diner", type: "åˆé¤(é€Ÿé£Ÿ)", price: "Â¥1,000~", features: ["ç‚¸é›", "å‡ºé¤æœ€å¿«"], isPrimary: false },
            { name: "å¤©ã‚€ã™ åƒå£½", type: "æ™šé¤(A:çœæ™‚)", price: "Â¥800~", features: ["ç‚¸è¦é£¯ç³°", "é«˜å³¶å±‹B1å¤–å¸¶", "å­©å­å¯åƒ"], isPrimary: true, navLink: "JR Takashimaya Nagoya" },
            { name: "å‘³ä»™ / å±±ã¡ã‚ƒã‚“", type: "æ™šé¤(C:åç‰©)", price: "Â¥1,500~", features: ["ä¸è¾£æ‹‰éºµ", "æ‹›ç‰Œé›ç¿…"], isPrimary: false, navLink: "ä¸–ç•Œçš„å±±ã¡ã‚ƒã‚“ åé§…åº—" },
          ],
          tips: ["æ¨‚åœ’ä¸é©åˆæ¨è»Šé€²å ´ (å…¥å£å¯åœæ”¾)ã€‚", "MiniLand æ˜¯æœ€ä½³å®¤å…§ä¼‘æ¯ç«™ã€‚", "ä¸‹é›¨è«‹ç›´æ¥å» Duplo Play æˆ– Police Stationã€‚"]
        },
        {
          id: 3,
          dateLabel: "D3",
          title: "ç™½å·é„‰ãƒ»é£›é¨¨é«˜å±± (å·´å£«åœ˜)",
          weather: { temp: "5Â°C / -3Â°C", condition: "é›ªåœ° / æ™´", icon: 'snow' },
          highlights: ["é«˜å±±è€è¡—", "é£›é©’ç‰›å£½å¸", "åˆæŒæ‘"],
          schedule: [
            { time: "08:45", title: "é›†åˆ", description: "åéµå·´å£«ä¸­å¿ƒãƒ»å¤ªé–¤é€šå£ (éŠ€æ™‚è¨ˆ)", important: "æº–æ™‚é›†åˆ!", type: "transport" },
            { time: "09:00", title: "å‡ºç™¼", description: "å‰å¾€é«˜å±± (è»Šç¨‹ç´„ 2.5 å°æ™‚)", type: "transport" },
            { time: "11:30-13:30", title: "é«˜å±±è€è¡—", description: "ä¸Šä¸‰ä¹‹ç”ºæ•£æ­¥ã€åˆé¤", type: "visit" },
            { time: "14:30-16:00", title: "ç™½å·é„‰åˆæŒæ‘", description: "æ²³å²¸æ‹ç…§ã€æ°‘å®¶åœ’ã€å’Œç”°å®¶", important: "ä¸å»ºè­°å»åŸå±±å±•æœ›å°(è·¯æ»‘)", type: "visit" },
            { time: "16:30", title: "è¿”ç¨‹", description: "é è¨ˆ 19:00 æŠµé”åå¤å±‹", type: "transport" },
          ],
          food: [
            { name: "é£›é¨¨ç‰›é£¯ åŒ å®¶", type: "åˆé¤(ä¸»æ¨)", price: "Â¥1,800~", features: ["é£›é©’ç‰›ä¸¼", "å‡ºé¤å¿«", "å°å­©å‹å–„"], isPrimary: true, navLink: "Takumiya Takayama" },
            { name: "ä¸¸æ˜ é«˜å±±å®‰å·åº—", type: "åˆé¤(å‚™é¸)", price: "Â¥2,800~", features: ["A5ç‡’è‚‰", "æ’éšŠå€¼å¾—"], isPrimary: false, navLink: "Maruaki Takayama Yasukawa" },
            { name: "é‡‘ä¹ƒã“ã£ã¦ç‰›", type: "å¿…åƒå°åƒ", price: "Â¥1,000", features: ["é£›é©’ç‰›å£½å¸ä¸‰è²«"], isPrimary: false, navLink: "Kotte Ushi" },
            { name: "ã—ã‚‰æ²³", type: "æ™šé¤(ä¸»é¸)", price: "Â¥2,800~", features: ["é°»é­šä¸‰åƒ", "æ¸…çˆ½ä¸è†©"], isPrimary: true, navLink: "Hitsumabushi Shirakawa" },
            { name: "ã²ã¤ã¾ã¶ã—å‚™é•·", type: "æ™šé¤(å‚™é¸)", price: "Â¥3,500~", features: ["å‡ºé¤å¿«", "ç‚­çƒ¤é¦™"], isPrimary: false, navLink: "Hitsumabushi Bincho" },
          ],
          tips: ["å¿…å‚™ï¼šé˜²æ»‘é›ªåœ°é‹(æˆ–é‹å¥—)ã€æš–æš–åŒ…ã€é˜²æ°´æ‰‹å¥—ã€‚", "å°å­©å®¹æ˜“æ»‘å€’ï¼Œæ³¨æ„ç©é›ªèˆ‡æº¶é›ªå‡æ°´ã€‚", "åŸå±±å±•æœ›å°è·¯æ»‘ä¸”å¸¸æ’éšŠï¼Œä¸å»ºè­°å‰å¾€ã€‚"]
        },
        {
          id: 4,
          dateLabel: "D4",
          title: "å‰åœåŠ›å…¬åœ’ä¸€æ—¥éŠ (å®Œæ•´ç‰ˆ)",
          weather: { temp: "10Â°C / 3Â°C", condition: "å¤šé›²", icon: 'cloud' },
          highlights: ["å‰åœåŠ›å¤§å€‰åº«", "é¾è²“éš§é“", "AEON ç©å…·åæ–—åŸ"],
          schedule: [
            { time: "09:30", title: "æŠµé”å…¬åœ’", description: "åœ°éµæ±å±±ç·š â†’ è—¤ãŒä¸˜ â†’ ãƒªãƒ‹ãƒ¢ (ç´„50åˆ†)", important: "å»ºè­°æå‰ 15-30 åˆ†é˜æ’éšŠ", type: "transport" },
            { time: "10:00", title: "å¤§å€‰åº«åƒè§€ (éœ€é ç´„)", description: "é¾è²“éš§é“ (å°å­©æœ€æ„›)ã€é£›è¡Œèˆ¹ã€åå ´é¢å±•", important: "è«‹æº–å‚™å¥½é ç´„ QR Code", type: "visit" },
            { time: "13:00", title: "åˆé¤æ™‚é–“", description: "åœ’å…§å’–å•¡å»³ æˆ– AEON ç¾é£Ÿè¡—", type: "food" },
            { time: "15:00", title: "AEON é•·ä¹…æ‰‹è³¼ç‰©", description: "ç©å…·åæ–—åŸ (è¶…å¤§)ã€è¦ªå­ä¼‘æ¯å€", type: "shopping" },
            { time: "18:00", title: "æ™šé¤", description: "è¿”å›åå¤å±‹å¸‚å€äº«ç”¨é°»é­šé£¯", type: "food" },
          ],
          food: [
            { name: "é¢¨ä¹‹è°· CafÃ©", type: "åœ’å…§ç°¡é¤", price: "Â¥1,200~", features: ["å’–å“©é£¯(å°è¾£)", "ä¸‰æ˜æ²»"], isPrimary: true, navLink: "Ghibli Park" },
            { name: "AEON ç¾é£Ÿè¡—", type: "å‚™é¸", price: "Â¥900~", features: ["ç‚¸é›", "çƒé¾éºµ", "é¸æ“‡å¤š"], isPrimary: false, navLink: "Aeon Mall Nagakute" },
            { name: "ã—ã‚‰æ²³ (æ™šé¤)", type: "é°»é­šä¸‰åƒ", price: "Â¥2,800~", features: ["æ¸…çˆ½ä¸è†©", "å­©å­å‹å–„"], isPrimary: true, navLink: "Hitsumabushi Shirakawa" },
            { name: "ã²ã¤ã¾ã¶ã—å‚™é•·", type: "æ™šé¤å‚™é¸", price: "Â¥3,500~", features: ["å‡ºé¤å¿«", "çœæ™‚"], isPrimary: false, navLink: "Hitsumabushi Bincho" },
          ],
          tips: ["å¤§å€‰åº«ç¦æ­¢æ¨è»Šå…¥é¤¨ (å…¥å£æœ‰å…è²»å¯„æ”¾å€)ã€‚", "å»ºè­°é ç•™ 3-4 å°æ™‚åƒè§€å¤§å€‰åº«ã€‚", "å±•å€å†·æ°£è¼ƒå¼·ï¼Œè«‹æ”œå¸¶è–„å¤–å¥—ã€‚", "é–€ç¥¨å»ºè­°ï¼šå¤§å€‰åº«å–®é¤¨ç¥¨ (Standard)ï¼Œå…¨å®¤å…§ä¸æ€•é›¨ã€‚"]
        },
        {
          id: 5,
          dateLabel: "D5",
          title: "Outlet & åèŠ±ä¹‹é‡Œ",
          weather: { temp: "11Â°C / 2Â°C", condition: "æœ‰é¢¨/æ™´", icon: 'sun' },
          highlights: ["ä¸‰äº• Outlet", "å…‰ä¹‹éš§é“", "æ°´ä¸Šç‡ˆå…‰ç§€"],
          schedule: [
            { time: "09:10", title: "å·´å£«å‡ºç™¼", description: "åéµå·´å£«ä¸­å¿ƒ (ä½¿ç”¨ã€Œã‚†ã£ãŸã‚Šãƒ‘ãƒƒã‚¯ã€å¥—ç¥¨)", important: "æˆäººÂ¥3,700/å…’ç«¥Â¥2,100 (å«é‡‘åˆ¸)", type: "transport" },
            { time: "10:10", title: "Outlet è³¼ç‰©", description: "å‹•ç·šï¼šNorth (ç²¾å“/é‹å‹•) â†’ South (é›œè²¨)", type: "shopping" },
            { time: "12:00", title: "åˆé¤", description: "ä¸­å¤®ä¼‘æ¯å€ç¾é£Ÿè¡—", type: "food" },
            { time: "16:00", title: "å‰å¾€åèŠ±ä¹‹é‡Œ", description: "æ­ä¹˜æ¥é§å·´å£«", type: "transport" },
            { time: "17:00", title: "é»ç‡ˆè³èŠ±", description: "æº«å®¤(ä¼‘æ¯) â†’ å…‰ä¹‹éš§é“ â†’ å¤§è‰åªä¸»ç§€", important: "é»ç‡ˆç¬é–“æœ€ç¾ (ç´„17:00)", type: "visit" },
            { time: "19:00", title: "æ™šé¤/è¿”å›", description: "å›åå¤å±‹å¸‚å€åƒé›ç¿…/æ‹‰éºµ", type: "food" },
          ],
          food: [
            { name: "VANSAN (Outlet)", type: "ç¾©å¼æ–™ç†", price: "Â¥1,500~", features: ["è¦ªå­å‹å–„", "å…è²»å…’ç«¥é¤å…·"], isPrimary: true, navLink: "Italian Kitchen VANSAN Jazz Dream Nagashima" },
            { name: "çŸ¢å ´ã¨ã‚“ (Outlet)", type: "å‘³å™Œè±¬æ’", price: "Â¥1,500~", features: ["åå¤å±‹åç‰©", "å¯é¸ä¸è¾£"], isPrimary: false, navLink: "Yabaton Jazz Dream Nagashima" },
            { name: "ã¾ã‚‹ã¯é£Ÿå ‚ (Outlet)", type: "ç‚¸è¦å®šé£Ÿ", price: "Â¥1,800~", features: ["å·¨å¤§ç‚¸è¦", "åç‰©"], isPrimary: false, navLink: "Maruha Shokudo Jazz Dream" },
            { name: "ä¸–ç•Œã®å±±ã¡ã‚ƒã‚“", type: "æ™šé¤(åç«™)", price: "Â¥2,000~", features: ["æ–¹ä¾¿", "è¦ªå­å¯é£Ÿ"], isPrimary: false, navLink: "ä¸–ç•Œçš„å±±ã¡ã‚ƒã‚“ åé§…åº—" },
          ],
          tips: ["å¥—ç¥¨ã€Œã‚†ã£ãŸã‚Šãƒ‘ãƒƒã‚¯ã€æœ€åˆ’ç®— (å«äº¤é€š+é–€ç¥¨+Â¥1000é‡‘åˆ¸)ã€‚", "æ¨è–¦å“ç‰Œï¼šBeams, United Arrows, Nike, BREEZE(ç«¥è£)ã€‚", "åèŠ±ä¹‹é‡Œå¤œé–“å¾ˆå†·ï¼Œå‹™å¿…ç©¿åšå¤–å¥—ã€åœå·¾ã€å¸¶æš–æš–åŒ…ã€‚", "ã€Œæº«å®¤ã€æ˜¯æœ€ä½³ä¿æš–ä¼‘æ¯é»ã€‚"]
        },
        {
          id: 6,
          dateLabel: "D6",
          title: "ç‰§æ­Œä¹‹é‡Œå†°é›ªæ¨‚åœ’ + æº«æ³‰é«”é©—æ—¥",
          weather: { temp: "4Â°C / -5Â°C", condition: "é™é›ª / æ™´", icon: 'snow' },
          highlights: ["é›ªç›†æˆ²é›ª", "å‹•ç‰©é¤µé£Ÿ", "ç‰§è¯æº«æ³‰"],
          schedule: [
            { time: "08:45", title: "é›†åˆ", description: "åéµå·´å£«ä¸­å¿ƒ (å¤ªé–¤é€šå£ éŠ€æ™‚è¨ˆ)", important: "æº–æ™‚é›†åˆ", type: "transport" },
            { time: "09:10", title: "å‡ºç™¼", description: "å‰å¾€ç‰§æ­Œä¹‹é‡Œ (è»Šç¨‹ç´„ 1.5 å°æ™‚)", type: "transport" },
            { time: "10:30-15:00", title: "å†°é›ªæ¨‚åœ’", description: "å‹•ç·šï¼šå…¥å£ â†’ é›ªç›†å€ â†’ å †é›ªäºº â†’ å‹•ç‰©å€", important: "å¿…å‚™é˜²æ°´æ‰‹å¥—ã€é˜²æ»‘é´ã€å‚™ç”¨è¥ªå­", type: "visit" },
            { time: "15:00-16:30", title: "æº«æ³‰é«”é©—", description: "ç‰§è¯æº«æ³‰ (å®¤å…§+éœ²å¤©)", important: "å…¥æ± å‰è«‹å…ˆæ²–æ¾¡", type: "rest" },
            { time: "17:00", title: "è¿”å›åå¤å±‹", description: "é è¨ˆ 19:00 æŠµé”è§£æ•£", type: "transport" },
          ],
          food: [
            { name: "ãµã‚‹é‡Œäº­ (åœ’å…§)", type: "åˆé¤(è¦ªå­)", price: "Â¥1,500~", features: ["ç‰›å¥¶é‹", "ç”œå‘³å’–å“©"], isPrimary: true, navLink: "Bokka no Sato" },
            { name: "ã¾ãã°ã®é¤¨ (åœ’å…§)", type: "åˆé¤(æ´‹é£Ÿ)", price: "Â¥1,200~", features: ["æ¼¢å ¡æ’", "å‡ºé¤å¿«"], isPrimary: false, navLink: "Bokka no Sato" },
            { name: "ä¸–ç•Œã®å±±ã¡ã‚ƒã‚“", type: "æ™šé¤(åç«™)", price: "Â¥2,000~", features: ["ç‰å­ç‡’", "å‘³å™Œè±¬æ’", "è¿‘é£¯åº—"], isPrimary: true, navLink: "ä¸–ç•Œçš„å±±ã¡ã‚ƒã‚“ åé§…åº—" },
            { name: "å‘³ä»™ (åç«™)", type: "æ™šé¤(æš–èƒƒ)", price: "Â¥1,500~", features: ["ä¸è¾£æ‹‰éºµ"], isPrimary: false, navLink: "å‘³ä»™ åå¤å±‹é§…å‰åº—" },
          ],
          tips: ["å¿…å‚™ï¼šé˜²æ»‘é›ªé´(æˆ–é‹å¥—)ã€é˜²æ°´æ‰‹å¥—ã€å°å­©å‚™ç”¨è¥ªå­ã€‚", "æº«æ³‰åˆºé’éœ€è²¼é®è“‹è²¼ã€‚", "é›ªåœ°åå°„å¼·ï¼Œå»ºè­°é…æˆ´å¢¨é¡ã€‚"]
        },
        {
          id: 7,
          dateLabel: "D7",
          title: "ç§‘å­¸é¤¨ãƒ»å¤§é ˆãƒ»æ©Ÿå ´",
          weather: { temp: "13Â°C / 6Â°C", condition: "æ™´æœ—", icon: 'sun' },
          highlights: ["å…’ç«¥ç§‘å­¸é¤¨", "å¤§é ˆå•†åº—è¡—", "å”å‰è»»å¾·æ¡è²·"],
          schedule: [
            { time: "10:00", title: "åå¤å±‹å¸‚ç§‘å­¸é¤¨", description: "å¿…ç©ï¼š2F å…’ç«¥é¤¨ & 3F æ”¾é›»å¯¦é©—", important: "ä¸­å­¸ç”Ÿä»¥ä¸‹å…è²»", type: "visit", navLink: "Nagoya City Science Museum" },
            { time: "12:30", title: "åˆé¤ (æ¦®å€)", description: "ã‚µã‚¬ãƒŸ æˆ– ã‚³ãƒ¡ãƒ€çˆç²", type: "food" },
            { time: "14:00", title: "å¤§é ˆå•†åº—è¡—", description: "è·¯ç·šï¼šå¤§é ˆè§€éŸ³ç«™(2è™Ÿå‡ºå£) â†’ èµ¤é–€é€š(æ‰­è›‹) â†’ æ–°å¤©åœ°é€š", type: "shopping", navLink: "Osu Shopping District" },
            { time: "15:15", title: "å”å‰è»»å¾·æ¦®æœ¬åº—", description: "1Fé›¶é£Ÿ(éºµåŒ…è¶…äºº)ã€2Fè—¥å¦(çœ¼è—¥æ°´)ã€3Få…’ç«¥(å…¥æµ´çƒ)", type: "shopping", navLink: "Don Quijote Sakae" },
            { time: "17:30", title: "æ™šé¤ & å–è¡Œæ", description: "æ¦®å€æ™šé¤å¾Œï¼Œå›é£¯åº—å–è¡Œæ", important: "å»ºè­° 17:10 å‰å…¥åº—æ™šé¤", type: "food" },
            { time: "20:00", title: "å‰å¾€æ©Ÿå ´", description: "åéµ ÂµSKY â†’ ä¸­éƒ¨åœ‹éš›æ©Ÿå ´", type: "transport" },
            { time: "21:00", title: "å…¥ä½æ©Ÿå ´é£¯åº—", description: "Comfort Hotel Centrair (é€£é€šèˆªå»ˆ)", type: "rest", navLink: "Comfort Hotel Central International Airport" },
          ],
          food: [
            { name: "ã‚µã‚¬ãƒŸ æ „åº—", type: "åˆé¤(å’Œé£Ÿ)", price: "Â¥1,200~", features: ["è•éº¥éºµ", "å…’ç«¥é¤"], isPrimary: true, navLink: "Sagami Sakae" },
            { name: "é‡‘é­šè™ç‡’", type: "å¤§é ˆå°åƒ", price: "Â¥300", features: ["å¯æ„›é¯›é­šç‡’", "å¤–é…¥å…§è»Ÿ"], isPrimary: false, navLink: "Kingyo Tayaki" },
            { name: "ã—ã‚‰æ²³ æ¦®ã‚¬ã‚¹ãƒ“ãƒ«åº—", type: "æ™šé¤(é°»é­š)", price: "Â¥2,800~", features: ["é°»é­šä¸‰åƒ", "æ¸…çˆ½"], isPrimary: true, navLink: "Shirakawa Sakae Gas Building" },
          ],
          tips: ["ç§‘å­¸é¤¨æ¨è»Šå‹å–„ï¼Œä½†å¤§é ˆå•†åº—è¡—äººå¤šè·¯çª„ä¸å»ºè­°å…¨ç¨‹ä½¿ç”¨ã€‚", "Donki æ¡è²·é‡é»ï¼š1F ä¼´æ‰‹ç¦®ã€2F è—¥å¦ã€3F å…’ç«¥ç”¨å“ã€‚", "æ™šé¤å»ºè­° 17:10 å‰å…¥åº—é¿å…æ’éšŠã€‚"]
        },
        {
          id: 8,
          dateLabel: "D8",
          title: "å›ç¨‹æ—¥ (ä¸­éƒ¨åœ‹éš›æ©Ÿå ´ â†’ å°ç£)",
          weather: { temp: "11Â°C / 5Â°C", condition: "å¤šé›²", icon: 'cloud' },
          highlights: ["Comfort Hotel", "è¦ä»™è²ä¹‹é‡Œ", "å…’ç«¥éŠæˆ²å€"],
          schedule: [
            { time: "07:00", title: "é£¯åº—æ—©é¤", description: "Comfort Hotel (06:00é–‹å§‹ä¾›æ‡‰)", important: "å»ºè­° 07:00-08:00 ç”¨é¤", type: "food" },
            { time: "08:00", title: "å‰å¾€èˆªå»ˆ", description: "æ­¥è¡Œ 3 åˆ†é˜ (æœ‰é›¨æ£šç›´é€š)", type: "transport" },
            { time: "09:00", title: "å ±åˆ°æ‰˜é‹", description: "ä¸­éƒ¨åœ‹éš›æ©Ÿå ´ (NGO)", important: "å»ºè­°é ç•™ 1 å°æ™‚ä»¥ä¸Š", type: "transport" },
            { time: "09:50", title: "èµ·é£› (è¿”å›å°ç£)", description: "äºŒæ¨“æœ‰å…’ç«¥éŠæˆ²å€å¯æ”¾é›»", type: "transport" },
            { time: "12:15", title: "æŠµé”å°ç£", description: "ç”œèœœçš„å®¶", type: "transport" },
          ],
          food: [
            { name: "è¦ä»™è²ä¹‹é‡Œ", type: "ä¼´æ‰‹ç¦®", price: "Â¥600~", features: ["è©¦åƒå¤š", "å¿…è²·"], isPrimary: true, navLink: "Ebisenbei No Sato Centrair" },
            { name: "å‚è§’ç¸½æœ¬èˆ–", type: "ä¼´æ‰‹ç¦®", price: "Â¥1,000~", features: ["è¦é¤…ååº—"], isPrimary: false, navLink: "Bankaku Sohonpo Centrair" },
            { name: "æ‰‹ç¾½å…ˆçœŸç©ºåŒ…", type: "ä¼´æ‰‹ç¦®", price: "Â¥1,200~", features: ["é¢¨ä¾†åŠ/å±±ã¡ã‚ƒã‚“", "å¯å¸¶å›åœ‹"], isPrimary: false },
            { name: "æ˜Ÿä¹ƒçˆç²åº—", type: "æ—©é¤/è¼•é£Ÿ", price: "Â¥800~", features: ["åšé¬†é¤…", "ç„—é£¯"], isPrimary: false, navLink: "Hoshino Coffee Centrair" },
          ],
          tips: ["Comfort Hotel è·é›¢èˆªå»ˆåƒ… 3 åˆ†é˜æ­¥è¡Œï¼Œä¸”æœ‰é›¨æ£šã€‚", "é€šé—œå‰å¯å» 2F å…’ç«¥éŠæˆ²å€çŸ­æš«æ”¾é›»ã€‚", "æ‰‹ç¾½å…ˆ(é›ç¿…)è«‹è²·ã€ŒçœŸç©ºåŒ…ã€æ‰èƒ½å¸¶å›å°ç£ã€‚"]
        }
      ];

      const SHOPPING_SPOTS = [
        { name: "MaxValu å¤ªé–¤åº—", dist: "12åˆ†", type: "è¶…å¸‚", tag: "24Hãƒ»ç¨®é¡é½Š", note: "æœ€æ¨è–¦", navLink: "MaxValu Taiko" },
        { name: "Donki åç«™è¥¿åº—", dist: "6åˆ†", type: "ç™¾è²¨", tag: "é›¶é£Ÿè—¥å¦", note: "å¿…é€›", navLink: "Don Quijote Nagoya Station West" },
        { name: "Sun-Ace é¾œå³¶åº—", dist: "11åˆ†", type: "è¶…å¸‚", tag: "ä¾¿å®œãƒ»åœ¨åœ°", note: "é24H", navLink: "Sun-Ace Kamejima" },
        { name: "Sugi Drug (ã‚¹ã‚®è–¬å±€)", dist: "5åˆ†", type: "è—¥å¦", tag: "æ¯”æ¾æœ¬æ¸…ä¿—", note: "ç”Ÿæ´»ç”¨å“", navLink: "Sugi Drug Nagoya Station West" },
        { name: "æ¾æœ¬æ¸… åå¤å±‹è¥¿å£", dist: "6åˆ†", type: "è—¥å¦", tag: "çˆ†å“å…¨", note: "", navLink: "Matsumoto Kiyoshi Nagoya Station West" },
        { name: "AEON MALL (é¾œå³¶å‘¨é‚Š)", dist: "15åˆ†", type: "å•†åŸ", tag: "å…’ç«¥ç©å…·", note: "Noritake Garden", navLink: "Aeon Mall Nagoya Noritake Garden" },
        { name: "7-11 / Lawson", dist: "1-3åˆ†", type: "è¶…å•†", tag: "å¿«é€Ÿè£œçµ¦", note: "", navLink: "Convenience Store near Daiwa Roynet Hotel Nagoya Taiko dori Side" },
      ];

      const SHOPPING_ROUTES = [
        { title: "æœ€çœåŠ›è·¯ç·š", desc: "é£¯åº— â†’ è¶…å•† â†’ å›æˆ¿", tag: "ç´¯ç™±å°ˆç”¨" },
        { title: "è¶…å¸‚æ¡è²·è·¯ç·š", desc: "é£¯åº— â†’ Donki â†’ MaxValu", tag: "è£œè²¨å°ˆç”¨" },
        { title: "å…’ç«¥ç”¨å“è·¯ç·š", desc: "é£¯åº— â†’ AEON é¾œå³¶", tag: "å°¿å¸ƒç©å…·" },
      ];

      // New data for Taiko Shopping Page
      const TAIKO_SHOPS_DATA = [
        { name: "MaxValu å¤ªé–¤åº—", dist: "12åˆ†", type: "è¶…å¸‚", pros: "24 å°æ™‚ç‡Ÿæ¥­ã€ç¨®é¡é½Šå…¨", note: "æœ€æ¨è–¦", navLink: "MaxValu Taiko" },
        { name: "Sun-Ace é¾œå³¶åº—", dist: "11-12åˆ†", type: "è¶…å¸‚", pros: "åƒ¹æ ¼æœ€ä½ã€åœ¨åœ°åŒ–", note: "é 24 å°æ™‚", navLink: "Sun-Ace Kamejima" },
        { name: "Donki åç«™è¥¿åº—", dist: "6åˆ†", type: "å¹³åƒ¹ç™¾è²¨", pros: "é›¶é£Ÿï¼‹è—¥å¦æœ€æ–¹ä¾¿", note: "å¿…åˆ— (è‡³å‡Œæ™¨)", navLink: "Don Quijote Nagoya Station West" },
        { name: "Sugi Drug (ã‚¹ã‚®è–¬å±€)", dist: "5åˆ†", type: "è—¥å¦åº—", pros: "åƒ¹æ ¼æ¯”æ¾æœ¬æ¸…ä½", note: "è£œå¥¶ç²‰/æ¿•ç´™å·¾", navLink: "Sugi Drug Nagoya Station West" },
        { name: "æ¾æœ¬æ¸… åå¤å±‹è¥¿å£åº—", dist: "6åˆ†", type: "è—¥å¦åº—", pros: "çˆ†å“å®Œæ•´", note: "æ„Ÿå†’è—¥/è…¸èƒƒè—¥", navLink: "Matsumoto Kiyoshi Nagoya Station West" },
        { name: "AEON é¾œå³¶", dist: "15åˆ†", type: "è³¼ç‰©ä¸­å¿ƒ", pros: "å…’ç«¥ç”¨å“ã€ç©å…·å¤š", note: "æœ€å¾Œè£œè²¨", navLink: "Aeon Mall Nagoya Noritake Garden" },
        { name: "7-11/Lawson/FM", dist: "1-3åˆ†", type: "ä¾¿åˆ©å•†åº—", pros: "æœ€å¿«é€Ÿè£œçµ¦", note: "", navLink: "Convenience Store near Daiwa Roynet Hotel Nagoya Taiko dori Side" },
      ];

      const TAIKO_ROUTES_DATA = [
        { title: "æœ€çœåŠ›è·¯ç·š (D1ã€D2 æ™šä¸Š)", path: "é£¯åº— â†’ 7-11/Lawson â†’ å›æˆ¿é–“", desc: "é©åˆé•·é€”é£›è¡Œå¾Œæˆ–æ¨‚åœ’æ—¥å¾Œï¼Œä¸æƒ³èµ°å¤ªé æ™‚ã€‚", tag: "ç´¯ç™±å°ˆç”¨" },
        { title: "è¶…å¸‚æ¡è²·è·¯ç·š (D7 æ™šä¸Š)", path: "é£¯åº— â†’ Donki â†’ MaxValu", desc: "æ­¥è¡Œ 6-12 åˆ†é˜ï¼Œä¸€æ¬¡æå®šå…¨éƒ¨ç”Ÿæ´»ç”¨å“ã€é›¶é£Ÿå’Œéš”æ—¥æ—©é¤ã€‚", tag: "è£œè²¨å°ˆç”¨" },
        { title: "å…’ç«¥ç”¨å“æ¡è³¼è·¯ç·š", path: "é£¯åº— â†’ AEON é¾œå³¶", desc: "å…’ç«¥ç”¨å“ï¼ˆç©å…·ã€ä¿æš–è¡£ç‰©ã€å¤§é‡å°¿å¸ƒï¼‰å……è¶³ã€‚", tag: "çˆ¸åª½å¿…çœ‹" },
      ];

      const DONKI_LIST_DATA = [
        { 
          category: "ğŸ¥‡ã€1ã€‘é›¶é£Ÿ (1F å€åŸŸ)", 
          items: ["éºµåŒ…è¶…äººé¤…ä¹¾ç›’ (å…’ç«¥å¿…è²·)", "éºµåŒ…è¶…äººæœå‡æ¯ (å¯çŸ­æš«å¸¸æº«)", "ã˜ã‚ƒãŒã‚Šã“ (å¥¶æ²¹èµ·å¸/æ²™æ‹‰)", "æ˜æ²»å·§å…‹åŠ›å°ç›’", "æŠ¹èŒ¶å¤¾å¿ƒé¤… (æ¦®åº—å¸¸æœ‰ç‰¹åƒ¹)"] 
        },
        { 
          category: "ğŸ²ã€2ã€‘å³é£Ÿæ–™ç† (1F/2F å€åŸŸ)", 
          items: ["S&B é‡‘ç‰Œå’–å“© (ç”˜å£/ä¸­è¾›)", "æ—¥æ¸…çƒé¾éºµæ¯ (å­©å­å£å‘³æº«å’Œ)", "å‘³å™Œæ¹¯çµ„åˆåŒ… (10 å…¥è¼•å·§ç‰ˆ)"] 
        },
        { 
          category: "ğŸ’Šã€3ã€‘è—¥å¦ä¿å¥ (2F å€åŸŸ)", 
          items: ["Rohto çœ¼è—¥æ°´ V5 (å·¥ä½œæ—ç†±éŠ·)", "Rohto é‡‘è‰²çœ¼è—¥æ°´ (ç–²å‹å°ˆç”¨)", "PAIR ç¥›ç—˜è† (ç©©å®šå¥½ç”¨)", "AD EX/Muhi æ­¢ç™¢ä¹³æ¶²", "å°å­©é€€ç†±è²¼ (è²·å›å°æœ€åˆ’ç®—)"] 
        },
        { 
          category: "ğŸ§¸ã€4ã€‘å…’ç«¥ç”¨å“ (3F å€åŸŸ)", 
          items: ["å…¥æµ´çƒ (æ³¡æ¾¡é©šå–œçƒ)", "éºµåŒ…è¶…äººç‰™åˆ· 3 å…¥çµ„"] 
        }
      ];

      const FOOD_APPENDIX_DATA = [
        {
          day: "D1",
          title: "æŠµé”åå¤å±‹ãƒ»åç«™æ™šé¤",
          items: [
            { name: "å‘³ä»™ åå¤å±‹ç«™å‰åº—", cat: "æ™šé¤", feat: ["å°å¼æ‹‰éºµ", "ç‚’é£¯", "å¯ä¸è¾£"], cost: "Â¥1,000-Â¥1,800", time: "21:30-22:30", primary: true },
            { name: "ä¸–ç•Œã®å±±ã¡ã‚ƒã‚“ åé§…åº—", cat: "æ™šé¤", feat: ["ç‚¸é›ç¿…", "ä¸²ç‡’", "å±…é…’å±‹é¢¨"], cost: "Â¥1,200-Â¥2,000", time: "21:30-22:30" }
          ]
        },
        {
          day: "D2",
          title: "LEGOLAND Japan è¦ªå­æ¨‚åœ’æ—¥",
          items: [
            { name: "Brick House Burger (åœ’å…§)", cat: "åˆé¤", feat: ["æ¨‚é«˜é€ å‹æ¼¢å ¡", "è–¯æ¢å¥—é¤"], cost: "Â¥1,200-Â¥1,800", time: "11:00-12:00", primary: true },
            { name: "Coral Reef Pizza (åœ’å…§)", cat: "åˆé¤", feat: ["æŠ«è–©", "ç¾©å¤§åˆ©éºµ", "åƒåˆ°é£½"], cost: "Â¥1,800-Â¥2,200", time: "11:30-13:00" },
            { name: "Chicken Diner (åœ’å…§)", cat: "åˆé¤", feat: ["ç‚¸é›", "å…’ç«¥å¥—é¤"], cost: "Â¥1,000-Â¥1,500", time: "11:30-12:30" },
            { name: "ã¾ã‚‹ã¯é£Ÿå ‚ åå¤å±‹æ¸¯åº—", cat: "æ™šé¤", feat: ["ç‚¸è¦å®šé£Ÿ", "æµ·æ™¯åº§ä½"], cost: "Â¥1,500-Â¥2,500", time: "18:00-19:00" },
            { name: "å¤©ã‚€ã™ åƒå£½ JRé«˜å³¶å±‹åº—", cat: "ä¼´æ‰‹", feat: ["ç‚¸è¦é£¯ç³°", "å¤–å¸¶æ–¹ä¾¿"], cost: "Â¥600-Â¥1,000", time: "18:30-19:30", primary: true }
          ]
        },
        {
          day: "D3",
          title: "ç™½å·é„‰ãƒ»é«˜å±±è€è¡—ä¸€æ—¥éŠ",
          items: [
            { name: "å‘³ã®ä¸å¹³ (é«˜å±±)", cat: "åˆé¤", feat: ["é£›é©’ç‰›éµæ¿", "é™¶æ¿ç‡’"], cost: "Â¥2,500-Â¥3,500", time: "12:00-13:00" },
            { name: "é£›é¨¨ç‰›é£¯ åŒ å®¶ (é«˜å±±)", cat: "åˆé¤", feat: ["é£›é©’ç‰›ä¸¼", "ç‚™å£½å¸"], cost: "Â¥1,800-Â¥2,300", time: "12:00-13:00", primary: true },
            { name: "ä¸¸æ˜ é«˜å±±å®‰å·åº—", cat: "åˆé¤", feat: ["A5é£›é©’ç‰›ç‡’è‚‰", "ç‰›æ’"], cost: "Â¥2,800-Â¥4,500", time: "12:30-13:30", primary: true },
            { name: "é‡‘ä¹ƒã“ã£ã¦ç‰›", cat: "å°åƒ", feat: ["é£›é©’ç‰›å£½å¸ä¸‰è²«"], cost: "Â¥1,200-Â¥1,500", time: "12:00-13:30" },
            { name: "ãœã‚“åŠ©", cat: "å°åƒ", feat: ["é£›é©’ç‰›ä¸²", "äº”å¹³é¤…"], cost: "Â¥300-Â¥700", time: "12:00-13:30" }
          ]
        },
        {
          day: "D4",
          title: "å‰åœåŠ›å…¬åœ’ãƒ»AEON é•·ä¹…æ‰‹",
          items: [
            { name: "é¢¨ä¹‹è°· CafÃ© (åœ’å…§)", cat: "åˆé¤", feat: ["å’–å“©é£¯", "ä¸‰æ˜æ²»", "é™å®šç”œé»"], cost: "Â¥1,000-Â¥1,800", time: "11:30-12:30", primary: true },
            { name: "AEON é•·ä¹…æ‰‹ ç¾é£Ÿè¡—", cat: "åˆé¤", feat: ["æ‹‰éºµ", "å£½å¸", "ç”œé»"], cost: "Â¥1,000-Â¥2,000", time: "13:00-15:00" },
            { name: "å‘³ä»™ åå¤å±‹ç«™å‰åº—", cat: "æ™šé¤", feat: ["å°å¼æ‹‰éºµ", "ç‚’é£¯", "å¯ä¸è¾£"], cost: "Â¥1,000-Â¥1,800", time: "18:00-19:00" },
            { name: "ä¸–ç•Œã®å±±ã¡ã‚ƒã‚“ åé§…åº—", cat: "æ™šé¤", feat: ["ç‚¸é›ç¿…", "ä¸²ç‡’"], cost: "Â¥1,200-Â¥2,000", time: "18:00-19:00" }
          ]
        },
        {
          day: "D5",
          title: "ä¸‰äº• Outlet Park + åèŠ±ä¹‹é‡Œ",
          items: [
            { name: "Italian Kitchen VANSAN", cat: "åˆé¤", feat: ["ç¾©å¤§åˆ©éºµ", "æŠ«è–©", "è¦ªå­å‹å–„"], cost: "Â¥1,200-Â¥2,000", time: "12:00-13:30", primary: true },
            { name: "ã¾ã‚‹ã¯é£Ÿå ‚ é•·å³¶åº—", cat: "åˆé¤", feat: ["ç‚¸è¦å®šé£Ÿ", "ç™½é£¯å¯çºŒ"], cost: "Â¥1,500-Â¥2,500", time: "12:00-13:30" },
            { name: "çŸ¢å ´ã¨ã‚“ é•·å³¶åº—", cat: "åˆé¤", feat: ["å‘³å™Œç‚¸è±¬æ’", "å¯é¸å…’ç«¥é¤"], cost: "Â¥1,500-Â¥2,000", time: "12:30-14:00", primary: true },
            { name: "åèŠ±ä¹‹é‡Œ CafÃ©", cat: "ä¸‹åˆèŒ¶", feat: ["ç‡ˆæœƒé™å®šç”œé»", "ç†±é£²"], cost: "Â¥800-Â¥1,500", time: "15:30-16:30" },
            { name: "ã¾ã‚‹ã¯é£Ÿå ‚ ä¸­éƒ¨æ©Ÿå ´åº—", cat: "æ™šé¤", feat: ["ç‚¸è¦å®šé£Ÿ", "æµ·æ™¯åº§ä½"], cost: "Â¥1,500-Â¥3,000", time: "20:30-21:30" },
            { name: "æ˜Ÿä¹ƒçˆç²åº— æ©Ÿå ´åº—", cat: "æ™šé¤", feat: ["é¬†é¤…", "ç„—é£¯", "å’–å•¡"], cost: "Â¥1,000-Â¥1,800", time: "20:30-21:30" }
          ]
        },
        {
          day: "D6",
          title: "ç‰§æ­Œä¹‹é‡Œãƒ»æº«æ³‰é«”é©—æ—¥",
          items: [
            { name: "ãµã‚‹é‡Œäº­ (ç‰§æ­Œã®é‡Œ)", cat: "åˆé¤", feat: ["ç‰›å¥¶é‹", "å’–å“©é£¯", "é£›é©’ç‰›"], cost: "Â¥1,200-Â¥2,000", time: "12:00-13:00", primary: true },
            { name: "ãƒ¬ã‚¹ãƒˆãƒ©ãƒ³ ã¾ãã°ã®é¤¨", cat: "åˆé¤", feat: ["æ´‹é£Ÿ", "æ¼¢å ¡æ’", "ç”œé»"], cost: "Â¥1,000-Â¥1,800", time: "12:00-13:00" },
            { name: "ç‰§è¯æº«æ³‰ (ã¾ãã°ã®æ¹¯)", cat: "ä¼‘æ¯", feat: ["è¼•é£Ÿ", "é£²æ–™", "è‡ªè²©æ©Ÿ"], cost: "-", time: "15:00-16:30" },
            { name: "ä¸–ç•Œã®å±±ã¡ã‚ƒã‚“ åé§…åº—", cat: "æ™šé¤", feat: ["ç‚¸é›ç¿…", "ä¸²ç‡’"], cost: "Â¥1,200-Â¥2,000", time: "19:00-20:00" },
            { name: "å‘³ä»™ åå¤å±‹ç«™å‰åº—", cat: "æ™šé¤", feat: ["å°å¼æ‹‰éºµ", "ç‚’é£¯"], cost: "Â¥1,000-Â¥1,800", time: "19:00-20:00" }
          ]
        },
        {
          day: "D7",
          title: "ç§‘å­¸é¤¨ãƒ»å¤§é ˆå•†åº—è¡—",
          items: [
            { name: "å–«èŒ¶ãƒªãƒƒãƒ (Kissa Ritchi)", cat: "æ—©é¤", feat: ["åå¤å±‹æ—©é¤", "åå¸å¥—é¤"], cost: "Â¥800-Â¥1,200", time: "08:00-09:00" },
            { name: "ã‚µã‚¬ãƒŸ æ „åº—", cat: "åˆé¤", feat: ["çƒé¾éºµ", "å‘³å™Œè±¬æ’å®šé£Ÿ"], cost: "Â¥1,200-Â¥1,800", time: "12:00-13:00" },
            { name: "ã‚³ãƒ¡ãƒ€çˆç² æ „ç§‘å­¸é¤¨å‰", cat: "åˆé¤", feat: ["å’–å•¡", "ä¸‰æ˜æ²»", "ç”œé»"], cost: "Â¥800-Â¥1,500", time: "12:00-13:30" },
            { name: "ã—ã‚‰æ²³ æ „ã‚¬ã‚¹ãƒ“ãƒ«åº—", cat: "æ™šé¤", feat: ["é°»é­šä¸‰åƒ", "æ¸…çˆ½", "å­©å­å‹å–„"], cost: "Â¥3,000-Â¥4,000", time: "17:30-19:00", primary: true },
            { name: "ã²ã¤ã¾ã¶ã—å‚™é•·", cat: "æ™šé¤", feat: ["é«˜å³¶å±‹", "å‡ºé¤å¿«"], cost: "Â¥3,000-Â¥4,500", time: "17:30-19:00", primary: true }
          ]
        },
        {
          day: "D8",
          title: "å›ç¨‹æ—¥ (ä¸­éƒ¨åœ‹éš›æ©Ÿå ´)",
          items: [
            { name: "è‹¥è‰å’–å•¡å»³", cat: "æ—©é¤", feat: ["åå¸", "è›‹æ²™æ‹‰", "å’–å•¡"], cost: "Â¥800-Â¥1,200", time: "07:00-08:00" },
            { name: "çŸ¢å ´ã¨ã‚“ ä¸­éƒ¨æ©Ÿå ´åº—", cat: "åˆé¤", feat: ["å‘³å™Œç‚¸è±¬æ’", "å‡ºé¤å¿«"], cost: "Â¥1,500-Â¥2,000", time: "10:00-11:00" },
            { name: "ã¾ã‚‹ã¯é£Ÿå ‚ ä¸­éƒ¨æ©Ÿå ´åº—", cat: "åˆé¤", feat: ["ç‚¸è¦å®šé£Ÿ", "æµ·æ™¯åº§ä½"], cost: "Â¥1,500-Â¥3,000", time: "10:00-11:00" }
          ]
        }
      ];

      const getWeatherIcon = (iconName) => {
        switch (iconName) {
          case 'sun': return <Sun className="w-8 h-8 text-orange-400" />;
          case 'cloud': return <Cloud className="w-8 h-8 text-gray-400" />;
          case 'snow': return <Snowflake className="w-8 h-8 text-blue-300" />;
          case 'rain': return <CloudRain className="w-8 h-8 text-blue-500" />;
          default: return <Sun className="w-8 h-8 text-orange-400" />;
        }
      };

      // --- Helper Components ---

      const Tag = ({ children, color = 'green' }) => {
        const colorClasses = {
          green: 'bg-ghibli-green/10 text-ghibli-green border-ghibli-green/20',
          orange: 'bg-orange-100 text-orange-700 border-orange-200',
          blue: 'bg-blue-50 text-blue-700 border-blue-200',
          purple: 'bg-purple-50 text-purple-700 border-purple-200',
        };
        return (
          <span className={`px-2 py-0.5 rounded-full text-[10px] font-medium border ${colorClasses[color]} mr-1 mb-1 inline-flex items-center`}>
            {children}
          </span>
        );
      };

      const Card = ({ children, className = "" }) => (
        <div className={`bg-white rounded-2xl shadow-sm p-4 ${className}`}>
          {children}
        </div>
      );

      // --- Tools View ---

      const ToolsView = () => {
        const budgetData = [
          { name: 'æ©Ÿç¥¨', value: 45000 },
          { name: 'ä½å®¿', value: 35000 },
          { name: 'äº¤é€š', value: 10000 },
          { name: 'é£²é£Ÿ', value: 20000 },
          { name: 'è³¼ç‰©', value: 15000 },
        ];
        const COLORS = ['#8da38b', '#e89e70', '#5c4839', '#7da6bd', '#f4a261'];

        return (
          <div className="space-y-6 pb-24">
            <h2 className="text-2xl font-bold text-ghibli-brown px-4 pt-4">æ—…éŠå·¥å…·ç®±</h2>
            
            <div className="px-4 grid grid-cols-2 gap-4">
              <Card className="flex flex-col items-center justify-center py-6 gap-2">
                  <Plane className="w-8 h-8 text-ghibli-green" />
                  <span className="font-bold text-ghibli-brown">èˆªç­è³‡è¨Š</span>
                  <span className="text-xs text-gray-500">å»: 17:15 | å›: 09:50</span>
              </Card>
              <Card className="flex flex-col items-center justify-center py-6 gap-2">
                  <Bed className="w-8 h-8 text-ghibli-orange" />
                  <span className="font-bold text-ghibli-brown">ä½å®¿é£¯åº—</span>
                  <span className="text-xs text-gray-500">Daiwa Roynet / Comfort</span>
              </Card>
            </div>

            {/* New Pre-trip Card */}
            <div className="px-4">
              <Card className="border-l-4 border-indigo-400">
                  <h3 className="flex items-center gap-2 font-bold text-indigo-600 mb-3">
                      <ClipboardCheck size={20} /> è¡Œå‰æª¢æŸ¥èˆ‡æº–å‚™
                  </h3>
                  <div className="space-y-3 text-sm">
                      <div>
                          <h4 className="font-bold text-ghibli-brown flex items-center gap-1.5 mb-1">
                            <span className="bg-indigo-100 p-1 rounded-full text-indigo-600"><CheckCircle size={12}/></span> 
                            è­‰ä»¶èˆ‡ç¶²å¡
                          </h4>
                          <ul className="list-disc list-inside text-xs space-y-1 text-gray-600 pl-1">
                              <li>æª¢æŸ¥è­·ç…§æ•ˆæœŸ (éœ€ &gt; 6 å€‹æœˆ)</li>
                              <li>å¡«å¯« Visit Japan Web (å…¥å¢ƒ/æµ·é—œ) ä¸¦æˆªåœ– QR Code</li>
                              <li><strong>è‡ªé§•å¿…å‚™</strong>: å°ç£é§•ç…§æ­£æœ¬ + æ—¥æ–‡è­¯æœ¬</li>
                              <li>è³¼è²·ç¶²å¡/é–‹é€šæ¼«éŠ (å»ºè­°ä¸€ä¸‹é£›æ©Ÿå³å¯ä½¿ç”¨)</li>
                          </ul>
                      </div>
                      <div className="border-t border-gray-100 pt-3">
                           <h4 className="font-bold text-ghibli-brown flex items-center gap-1.5 mb-1">
                            <span className="bg-orange-100 p-1 rounded-full text-orange-600"><ShoppingBag size={12}/></span> 
                            è¡Œææ‰“åŒ…é‡é»
                          </h4>
                          <ul className="list-disc list-inside text-xs space-y-1 text-gray-600 pl-1">
                              <li>è¡£ç‰©: æ´‹è”¥å¼ç©¿æ­ (æˆ¶å¤–å†·/å®¤å…§æš–æ°£å¼·)</li>
                              <li>è—¥å“: å…’ç«¥å¸¸å‚™è—¥ (é€€ç‡’ã€æ­¢å’³ã€ç›Šç”ŸèŒ) & é«”æº«è¨ˆ</li>
                              <li>é›»å­: è¡Œå‹•é›»æº (éš¨èº«å¸¶)ã€å……é›»ç·šã€è½‰æ¥é ­(æ—¥æœ¬å…©å­”)</li>
                          </ul>
                      </div>
                      <div className="border-t border-gray-100 pt-3">
                           <h4 className="font-bold text-ghibli-brown flex items-center gap-1.5 mb-1">
                            <span className="bg-green-100 p-1 rounded-full text-green-600"><Banknote size={12}/></span> 
                            è²¨å¹£å»ºè­°
                          </h4>
                          <p className="text-xs text-gray-600 pl-1">å»ºè­°æ¯äººæº–å‚™ Â¥30,000 ç¾é‡‘ (è€è¡—/åœè»Š/è²©è³£æ©Ÿ)ï¼Œå…¶é¤˜ä»¥é«˜å›é¥‹ä¿¡ç”¨å¡ç‚ºä¸»ã€‚</p>
                      </div>
                  </div>
              </Card>
            </div>

            <div className="px-4">
              <Card className="border-l-4 border-red-400">
                  <h3 className="flex items-center gap-2 font-bold text-red-500 mb-3">
                      <AlertCircle size={20} /> ç·Šæ€¥è¯çµ¡
                  </h3>
                  <div className="space-y-2 text-sm">
                      <div className="flex justify-between border-b pb-2">
                          <span>æ•‘è­·è»Š / ç«è­¦</span>
                          <span className="font-bold font-mono text-lg">119</span>
                      </div>
                      <div className="flex justify-between border-b pb-2">
                          <span>è­¦å¯Ÿå±€</span>
                          <span className="font-bold font-mono text-lg">110</span>
                      </div>
                      <div className="pt-2 text-gray-600">
                          <p>å¯¦ç”¨æ—¥èªï¼š</p>
                          <p>é†«é™¢ (ByÅin) | è—¥å±€ (Yakkyoku)</p>
                      </div>
                  </div>
              </Card>
            </div>

            <div className="px-4">
              <Card>
                  <h3 className="flex items-center gap-2 font-bold text-ghibli-brown mb-4">
                      <Wallet size={20} /> é ç®—æ¦‚è¦½ (TWD)
                  </h3>
                  <div className="h-64 w-full">
                      <ResponsiveContainer width="100%" height="100%">
                          <PieChart>
                              <Pie
                                  data={budgetData}
                                  cx="50%"
                                  cy="50%"
                                  innerRadius={60}
                                  outerRadius={80}
                                  paddingAngle={5}
                                  dataKey="value"
                              >
                                  {budgetData.map((entry, index) => (
                                      <Cell key={`cell-${index}`} fill={COLORS[index % COLORS.length]} />
                                  ))}
                              </Pie>
                              <Tooltip formatter={(value) => `$${value}`} />
                          </PieChart>
                      </ResponsiveContainer>
                  </div>
                  <div className="grid grid-cols-2 gap-2 text-xs text-gray-600 mt-4">
                      {budgetData.map((item, idx) => (
                          <div key={idx} className="flex items-center gap-2">
                              <div className="w-3 h-3 rounded-full" style={{backgroundColor: COLORS[idx]}}></div>
                              <span>{item.name}: ${item.value.toLocaleString()}</span>
                          </div>
                      ))}
                  </div>
              </Card>
            </div>
          </div>
        );
      };

      // --- Main App Component ---

      const App = () => {
        const [activeTab, setActiveTab] = useState('HOME');
        const [selectedDayId, setSelectedDayId] = useState(null);

        const selectedDay = ITINERARY_DATA.find(d => d.id === selectedDayId);

        useEffect(() => {
          window.scrollTo(0, 0);
        }, [selectedDayId, activeTab]);

        const handleNavClick = (url) => {
          if (!url) return;
          const query = encodeURIComponent(url);
          window.open(`https://www.google.com/maps/search/?api=1&query=${query}`, '_blank');
        };

        return (
          <div className="min-h-screen pb-20 max-w-md mx-auto bg-ghibli-cream shadow-2xl relative overflow-hidden">
            
            {/* Detail View */}
            {activeTab === 'HOME' && selectedDay && (
              <div className="animate-fade-in pb-24">
                <div className="sticky top-0 z-10 bg-ghibli-cream/95 backdrop-blur-sm border-b border-stone-200 px-4 py-4 flex items-center gap-4">
                  <button 
                    onClick={() => setSelectedDayId(null)}
                    className="p-2 -ml-2 rounded-full hover:bg-stone-200 transition-colors"
                  >
                    <ChevronLeft className="text-ghibli-brown" />
                  </button>
                  <div>
                    <div className="text-xs font-bold text-ghibli-green uppercase tracking-wider">{selectedDay.dateLabel}</div>
                    <h1 className="text-lg font-bold text-ghibli-brown leading-tight">{selectedDay.title}</h1>
                  </div>
                </div>

                <div className="m-4 p-4 bg-gradient-to-r from-blue-50 to-indigo-50 rounded-2xl flex items-center justify-between shadow-sm">
                  <div className="flex flex-col">
                      <span className="text-xs text-gray-500 mb-1">ä»Šæ—¥å¤©æ°£é å ±</span>
                      <span className="text-2xl font-bold text-ghibli-brown">{selectedDay.weather.temp}</span>
                      <span className="text-sm text-gray-600">{selectedDay.weather.condition}</span>
                  </div>
                  <div>
                      {getWeatherIcon(selectedDay.weather.icon)}
                  </div>
                </div>

                <div className="px-4 mb-8">
                  <h2 className="text-sm font-bold text-gray-400 mb-4 uppercase tracking-widest">ä»Šæ—¥è¡Œç¨‹</h2>
                  <div className="space-y-0 relative border-l-2 border-dashed border-ghibli-greenLight/30 ml-3">
                    {selectedDay.schedule.map((item, idx) => (
                      <div key={idx} className="pl-6 pb-8 relative group">
                        <div className={`absolute -left-[9px] top-1 w-4 h-4 rounded-full border-2 border-white shadow-sm
                          ${item.type === 'transport' ? 'bg-blue-300' : 
                            item.type === 'food' ? 'bg-orange-300' : 
                            item.type === 'shopping' ? 'bg-purple-300' : 'bg-ghibli-green'}
                        `}></div>
                        
                        <div className="flex justify-between items-start">
                          <span className="text-xs font-mono font-bold text-ghibli-greenLight bg-white px-1 rounded mb-1 inline-block">{item.time}</span>
                          {item.navLink && (
                              <button onClick={() => handleNavClick(item.navLink)} className="text-xs text-blue-500 flex items-center gap-0.5">
                                  <Navigation size={12} /> å°èˆª
                              </button>
                          )}
                        </div>
                        
                        <h3 className="font-bold text-ghibli-brown text-lg">{item.title}</h3>
                        {item.description && <p className="text-sm text-gray-600 mt-1">{item.description}</p>}
                        
                        {item.important && (
                          <div className="mt-2 bg-red-50 text-red-600 text-xs px-2 py-1.5 rounded-lg border border-red-100 flex items-start gap-1.5">
                              <AlertCircle size={14} className="mt-0.5 shrink-0" />
                              <span>{item.important}</span>
                          </div>
                        )}
                      </div>
                    ))}
                  </div>
                </div>

                <div className="px-4 mb-8">
                  <h2 className="text-sm font-bold text-gray-400 mb-4 uppercase tracking-widest flex items-center gap-2">
                      <Utensils size={16} /> ç¾é£Ÿæ¨è–¦
                  </h2>
                  <div className="grid gap-4">
                      {selectedDay.food.map((food, idx) => (
                          <Card key={idx} className={food.isPrimary ? "border-2 border-orange-100" : ""}>
                              <div className="flex justify-between items-start mb-2">
                                  <div>
                                      <h4 className="font-bold text-ghibli-brown text-lg">{food.name}</h4>
                                      <div className="text-xs text-gray-500">{food.type} â€¢ {food.price}</div>
                                  </div>
                                  {food.navLink && (
                                      <button onClick={() => handleNavClick(food.navLink)} className="bg-blue-50 p-2 rounded-full text-blue-500">
                                          <Navigation size={16} />
                                      </button>
                                  )}
                              </div>
                              <div className="flex flex-wrap gap-2 mt-3">
                                  {food.features.map((feat, fidx) => (
                                      <Tag key={fidx} color={food.isPrimary ? 'orange' : 'green'}>{feat}</Tag>
                                  ))}
                              </div>
                          </Card>
                      ))}
                  </div>
                </div>

                <div className="px-4 mb-8">
                  <div className="bg-ghibli-green/5 rounded-2xl p-5 border border-ghibli-green/10">
                      <h3 className="font-bold text-ghibli-green mb-3 flex items-center gap-2">
                          <Info size={18} /> è¦ªå­å°è²¼å£«
                      </h3>
                      <ul className="space-y-2">
                          {selectedDay.tips.map((tip, idx) => (
                              <li key={idx} className="text-sm text-ghibli-brown/80 flex gap-2">
                                  <span className="text-ghibli-green">â€¢</span>
                                  {tip}
                              </li>
                          ))}
                      </ul>
                  </div>
                </div>
              </div>
            )}

            {/* Home Grid View */}
            {activeTab === 'HOME' && !selectedDay && (
              <div className="animate-fade-in pb-24">
                <header className="px-6 pt-10 pb-6">
                  <h1 className="text-3xl font-bold text-ghibli-brown">åå¤å±‹</h1>
                  <p className="text-ghibli-green text-lg">8 å¤© 7 å¤œ è¦ªå­è‡ªé§•éŠ</p>
                </header>

                <div className="px-4 grid grid-cols-2 gap-3">
                  {ITINERARY_DATA.map((day) => (
                    <button 
                      key={day.id}
                      onClick={() => setSelectedDayId(day.id)}
                      className="bg-white p-4 rounded-2xl shadow-sm border border-transparent hover:border-ghibli-orange/30 hover:shadow-md transition-all text-left flex flex-col h-full"
                    >
                      <div className="flex justify-between items-center mb-2">
                          <span className="bg-ghibli-brown text-ghibli-cream text-xs font-bold px-2 py-1 rounded-md">{day.dateLabel}</span>
                          <div className="opacity-50 scale-75 origin-right">{getWeatherIcon(day.weather.icon)}</div>
                      </div>
                      <h3 className="font-bold text-ghibli-brown text-sm mb-1 leading-snug">{day.title}</h3>
                      <div className="mt-auto pt-2 flex flex-wrap gap-1">
                          {day.highlights.slice(0, 2).map((h, i) => (
                              <span key={i} className="text-[10px] text-gray-500 bg-gray-50 px-1.5 py-0.5 rounded">{h}</span>
                          ))}
                      </div>
                    </button>
                  ))}
                </div>

                <div className="mt-8 px-6">
                  <div className="bg-gradient-to-br from-ghibli-green to-emerald-800 rounded-3xl p-6 text-white shadow-lg relative overflow-hidden">
                      <div className="relative z-10">
                          <h3 className="font-bold text-lg mb-1">æ—…è¡Œå°å¹«æ‰‹</h3>
                          <p className="text-white/80 text-sm mb-4">æŸ¥çœ‹èˆªç­ã€é ç®—èˆ‡ç·Šæ€¥è³‡è¨Š</p>
                          <button 
                              onClick={() => setActiveTab('TOOLS')}
                              className="bg-white/20 hover:bg-white/30 backdrop-blur-md px-4 py-2 rounded-lg text-sm font-bold flex items-center gap-2 transition-colors"
                          >
                              æ‰“é–‹å·¥å…·ç®± <ArrowRight size={16} />
                          </button>
                      </div>
                      <Plane className="absolute -right-4 -bottom-4 text-white/10 w-32 h-32 rotate-12" />
                  </div>
                </div>

                {/* Appendix Section */}
                <div className="mt-6 px-6 pb-8 space-y-3">
                  <h3 className="font-bold text-ghibli-brown text-lg px-1">å¯¦ç”¨é™„éŒ„</h3>
                  
                  {/* Card 1: Transport Tickets */}
                  <button 
                    onClick={() => setActiveTab('TRANSPORT')}
                    className="w-full bg-white rounded-xl p-4 shadow-sm border border-ghibli-green/10 flex items-center gap-4 hover:shadow-md transition-all group"
                  >
                    <div className="bg-blue-50 p-2.5 rounded-full text-blue-500">
                      <Ticket size={20} />
                    </div>
                    <div className="flex-1 text-left">
                      <h4 className="font-bold text-ghibli-brown">äº¤é€šç¥¨åˆ¸</h4>
                      <p className="text-xs text-gray-500">åå¤å±‹é™„éŒ„ç¯‡</p>
                    </div>
                    <ArrowRight size={16} className="text-gray-300 group-hover:text-ghibli-orange transition-colors" />
                  </button>

                  {/* Card 2: Food List */}
                  <button 
                    onClick={() => setActiveTab('FOOD')}
                    className="w-full bg-white rounded-xl p-4 shadow-sm border border-ghibli-green/10 flex items-center gap-4 hover:shadow-md transition-all group"
                  >
                    <div className="bg-orange-50 p-2.5 rounded-full text-orange-500">
                      <Table size={20} />
                    </div>
                    <div className="flex-1 text-left">
                      <h4 className="font-bold text-ghibli-brown">ç¾é£Ÿé™„éŒ„</h4>
                      <p className="text-xs text-gray-500">å®Œæ•´è¡¨æ ¼ç‰ˆï½œå«å»ºè­°æ™‚æ®µ</p>
                    </div>
                    <ArrowRight size={16} className="text-gray-300 group-hover:text-ghibli-orange transition-colors" />
                  </button>

                  {/* Card 3: Complete Map List */}
                  <button 
                    onClick={() => setActiveTab('FULL_MAP')}
                    className="w-full bg-white rounded-xl p-4 shadow-sm border border-ghibli-green/10 flex items-center gap-4 hover:shadow-md transition-all group"
                  >
                    <div className="bg-purple-50 p-2.5 rounded-full text-purple-500">
                      <Map size={20} />
                    </div>
                    <div className="flex-1 text-left">
                      <h4 className="font-bold text-ghibli-brown">å®Œæ•´è³¼ç‰©åœ°åœ–</h4>
                      <p className="text-xs text-gray-500">è¶…å¸‚ï¼‹è—¥å¦ï¼‹å¹³åƒ¹åº—æ¸…å–®</p>
                    </div>
                    <ArrowRight size={16} className="text-gray-300 group-hover:text-ghibli-orange transition-colors" />
                  </button>

                  {/* Card 4: Taiko Shopping */}
                  <button 
                    onClick={() => setActiveTab('TAIKO_SHOPPING')}
                    className="w-full bg-white rounded-xl p-4 shadow-sm border border-ghibli-green/10 flex items-center gap-4 hover:shadow-md transition-all group"
                  >
                    <div className="bg-pink-50 p-2.5 rounded-full text-pink-500">
                      <Store size={20} />
                    </div>
                    <div className="flex-1 text-left">
                      <h4 className="font-bold text-ghibli-brown">åå¤å±‹ç«™å¤ªé–¤é€šå£</h4>
                      <p className="text-xs text-gray-500">è¶…å¸‚ï¼†å¤§å‹å¹³åƒ¹å•†åº—ç¸½æ•´ç†</p>
                    </div>
                    <ArrowRight size={16} className="text-gray-300 group-hover:text-ghibli-orange transition-colors" />
                  </button>
                </div>

              </div>
            )}

            {/* Transport Tickets View */}
            {activeTab === 'TRANSPORT' && (
              <div className="animate-fade-in pb-24 bg-ghibli-cream">
                 <div className="sticky top-0 z-10 bg-ghibli-cream/95 backdrop-blur-sm border-b border-stone-200 px-4 py-4 flex items-center gap-4">
                  <button 
                    onClick={() => setActiveTab('HOME')}
                    className="p-2 -ml-2 rounded-full hover:bg-stone-200 transition-colors"
                  >
                    <ChevronLeft className="text-ghibli-brown" />
                  </button>
                  <div>
                    <h1 className="text-lg font-bold text-ghibli-brown leading-tight">äº¤é€šç¥¨åˆ¸ç¸½è¦½</h1>
                    <span className="text-xs text-gray-500">åå¤å±‹é™„éŒ„ç¯‡</span>
                  </div>
                </div>
                
                <div className="p-4 space-y-6">
                  {/* Intro */}
                  <div className="bg-blue-50 p-3 rounded-lg text-sm text-blue-700 flex gap-2 items-start border border-blue-100 shadow-sm">
                     <Info size={16} className="mt-0.5 shrink-0"/>
                     <p>ä»¥ä¸‹é™„éŒ„å·²å®Œå…¨ä¾æ‚¨çš„<strong>ã€Œæœ€æ–°ç‰ˆè¡Œç¨‹é †åºã€</strong>é‡æ–°æ•´ç†ï¼Œä¸¦æ•´åˆäº†äº¤é€šè‰²å¡Šï¼Œæ–¹ä¾¿æ‚¨å¿«é€Ÿè­˜åˆ¥è·¯ç·šã€‚</p>
                  </div>

                  {/* Child Rules Table */}
                  <Card>
                    <h3 className="font-bold text-ghibli-brown mb-3 flex items-center gap-2">
                        <Ticket size={18} className="text-ghibli-green"/> 4 æ­²å¹¼ç«¥ç¥¨åˆ¸è¦å‰‡
                    </h3>
                    <div className="overflow-x-auto">
                         <table className="w-full text-xs text-left">
                            <thead className="bg-gray-50 text-gray-700 font-bold border-b">
                                <tr>
                                    <th className="p-2 whitespace-nowrap">äº¤é€šæ–¹å¼</th>
                                    <th className="p-2 whitespace-nowrap text-center">éœ€ç¥¨?</th>
                                    <th className="p-2 whitespace-nowrap">å‚™è¨»</th>
                                </tr>
                            </thead>
                            <tbody className="divide-y divide-gray-100">
                                <tr><td className="p-2 font-medium text-gray-700">åœ°éµå…¨ç·š</td><td className="p-2 text-center text-green-600 font-bold">å…</td><td className="p-2 text-gray-500">ä¸ä¿è­‰åº§ä½</td></tr>
                                <tr><td className="p-2 font-medium text-gray-700">ã‚ãŠãªã¿ç·š</td><td className="p-2 text-center text-green-600 font-bold">å…</td><td className="p-2 text-gray-500">-</td></tr>
                                <tr><td className="p-2 font-medium text-gray-700">ãƒªãƒ‹ãƒ¢</td><td className="p-2 text-center text-green-600 font-bold">å…</td><td className="p-2 text-gray-500">-</td></tr>
                                <tr><td className="p-2 font-medium text-gray-700">åéµæ™®é€šè»Š</td><td className="p-2 text-center text-green-600 font-bold">å…</td><td className="p-2 text-gray-500">å¯å…±å</td></tr>
                                <tr><td className="p-2 font-medium text-red-600">åéµ ÂµSKY æŒ‡å®šå¸­</td><td className="p-2 text-center text-red-500 font-bold">éœ€</td><td className="p-2 text-gray-500">å› ä½”ä½</td></tr>
                                <tr><td className="p-2 font-medium text-gray-700">KKday å·´å£«åœ˜</td><td className="p-2 text-center text-gray-500">å«</td><td className="p-2 text-gray-500">åœ˜è²»å¤šåŒ…å«</td></tr>
                            </tbody>
                        </table>
                    </div>
                  </Card>

                  {/* Daily Schedule Table */}
                  <Card>
                     <h3 className="font-bold text-ghibli-brown mb-3 flex items-center gap-2">
                        <Calendar size={18} className="text-ghibli-orange"/> æ–°ç‰ˆè¡Œç¨‹ Ã— äº¤é€šç¥¨åˆ¸
                    </h3>
                    <div className="overflow-x-auto -mx-2">
                         <table className="w-full text-xs text-left min-w-[500px]">
                            <thead className="bg-ghibli-green/10 text-ghibli-brown font-bold border-b border-ghibli-green/20">
                                <tr>
                                    <th className="p-2">æ—¥æ¬¡</th>
                                    <th className="p-2">è·¯ç·šè‰²å¡Š</th>
                                    <th className="p-2">ç¥¨åˆ¸ / åƒ¹æ ¼</th>
                                    <th className="p-2">é‡é»</th>
                                </tr>
                            </thead>
                            <tbody className="divide-y divide-gray-100">
                                <tr>
                                    <td className="p-2 font-bold text-center">D1</td>
                                    <td className="p-2"><span className="bg-red-100 text-red-700 px-1.5 py-0.5 rounded font-bold">åéµ ÂµSKY</span></td>
                                    <td className="p-2">æŒ‡å®šå¸­åˆ¸ Â¥1,250</td>
                                    <td className="p-2 text-gray-500">è‹¥ä½”ä½éœ€ç¥¨</td>
                                </tr>
                                <tr>
                                    <td className="p-2 font-bold text-center">D2</td>
                                    <td className="p-2"><span className="bg-blue-800 text-white px-1.5 py-0.5 rounded font-bold">ã‚ãŠãªã¿ç·š</span></td>
                                    <td className="p-2">ä¸€æ—¥åˆ¸ Â¥870</td>
                                    <td className="p-2 text-gray-500">å¾€è¿”åˆ’ç®—</td>
                                </tr>
                                <tr>
                                    <td className="p-2 font-bold text-center">D3</td>
                                    <td className="p-2"><span className="bg-orange-500 text-white px-1.5 py-0.5 rounded font-bold">åéµå·´å£«åœ˜</span></td>
                                    <td className="p-2">KKday (å«)</td>
                                    <td className="p-2 text-gray-500">éŠ€æ™‚è¨ˆé›†åˆ</td>
                                </tr>
                                <tr>
                                    <td className="p-2 font-bold text-center">D4</td>
                                    <td className="p-2">
                                        <span className="bg-yellow-400 text-white px-1.5 py-0.5 rounded font-bold mr-1">æ±å±±</span>
                                        <span className="bg-green-500 text-white px-1.5 py-0.5 rounded font-bold">ãƒªãƒ‹ãƒ¢</span>
                                    </td>
                                    <td className="p-2">åœ°éµåˆ¸ + ãƒªãƒ‹ãƒ¢</td>
                                    <td className="p-2 text-gray-500">å‰åœåŠ›éœ€é ç´„</td>
                                </tr>
                                <tr>
                                    <td className="p-2 font-bold text-center">D5</td>
                                    <td className="p-2"><span className="bg-indigo-600 text-white px-1.5 py-0.5 rounded font-bold">åéµå¥—ç¥¨</span></td>
                                    <td className="p-2">ã‚†ã£ãŸã‚Š Â¥3,700</td>
                                    <td className="p-2 text-gray-500">å«é–€ç¥¨+é‡‘åˆ¸</td>
                                </tr>
                                <tr>
                                    <td className="p-2 font-bold text-center">D6</td>
                                    <td className="p-2"><span className="bg-gray-500 text-white px-1.5 py-0.5 rounded font-bold">æ»‘é›ªåœ˜</span></td>
                                    <td className="p-2">KKday (å«)</td>
                                    <td className="p-2 text-gray-500">å«æº«æ³‰</td>
                                </tr>
                                <tr>
                                    <td className="p-2 font-bold text-center">D7</td>
                                    <td className="p-2">
                                        <span className="bg-blue-500 text-white px-1 py-0.5 rounded mr-1">é¶´</span>
                                        <span className="bg-yellow-400 text-white px-1 py-0.5 rounded mr-1">æ±</span>
                                        <span className="bg-red-500 text-white px-1 py-0.5 rounded">å</span>
                                    </td>
                                    <td className="p-2">åœ°éµ + ÂµSKY</td>
                                    <td className="p-2 text-gray-500">ç§»å®¿æ©Ÿå ´</td>
                                </tr>
                            </tbody>
                         </table>
                    </div>
                  </Card>

                  {/* Tips */}
                  <div className="space-y-4">
                      <h3 className="font-bold text-ghibli-brown px-1 flex items-center gap-2">
                          <AlertCircle size={18} /> äº¤é€šè³¼ç¥¨èˆ‡å‹•ç·šæé†’
                      </h3>
                      
                      <Card className="border-l-4 border-red-400">
                          <h4 className="font-bold text-red-500 text-sm mb-1">åéµ ÂµSKY (D1/D7)</h4>
                          <ul className="text-xs text-gray-600 list-disc list-inside space-y-1">
                              <li>è³¼è²·åœ°é»: æ©Ÿå ´ 2F åéµå”®ç¥¨çª—å£ (æ”¯æ´ä¸­æ–‡)</li>
                              <li>å»ºè­° D1 æŠµé”æ™‚å¯åŒæ™‚é è³¼ D7 å›ç¨‹ç¥¨</li>
                          </ul>
                      </Card>

                      <Card className="border-l-4 border-blue-400">
                          <h4 className="font-bold text-blue-500 text-sm mb-1">æ¨‚é«˜æ¨‚åœ’ (D2)</h4>
                          <p className="text-xs text-gray-600">ã‚ãŠãªã¿ç·šä¸€æ—¥åˆ¸ï¼šåªè¦ 2 æ¬¡ä»¥ä¸Šé€²å‡ºç«™ï¼ˆä¾†å›ï¼‰å°±æœƒåˆ’ç®—ã€‚</p>
                      </Card>

                      <Card className="border-l-4 border-green-400">
                          <h4 className="font-bold text-green-600 text-sm mb-1">å‰åœåŠ›å…¬åœ’ (D4)</h4>
                          <ul className="text-xs text-gray-600 list-disc list-inside space-y-1">
                              <li>é–€ç¥¨å¿…é ˆäº‹å‰é ç´„ï¼Œç¾å ´ä¸è²©å”®</li>
                              <li>åœ’å…§å¤šè™•ç¦æ­¢æ¨è»Šï¼Œå…¥å£æœ‰å…è²»å¯„æ”¾å€</li>
                          </ul>
                      </Card>
                      
                       <Card className="border-l-4 border-indigo-400">
                          <h4 className="font-bold text-indigo-600 text-sm mb-1">åèŠ±ä¹‹é‡Œ (D5)</h4>
                          <p className="text-xs text-gray-600">å¥—ç¥¨ã€Œã‚†ã£ãŸã‚Šãƒ‘ãƒƒã‚¯ã€å·²åŒ…å«å¤œé–“å…¥å ´é–€ç¥¨å’Œé‡‘åˆ¸ Â¥1,000ã€‚</p>
                      </Card>
                  </div>
                </div>
              </div>
            )}

            {/* Food List View */}
            {activeTab === 'FOOD' && (
              <div className="animate-fade-in pb-24 bg-ghibli-cream">
                 <div className="sticky top-0 z-10 bg-ghibli-cream/95 backdrop-blur-sm border-b border-stone-200 px-4 py-4 flex items-center gap-4">
                  <button 
                    onClick={() => setActiveTab('HOME')}
                    className="p-2 -ml-2 rounded-full hover:bg-stone-200 transition-colors"
                  >
                    <ChevronLeft className="text-ghibli-brown" />
                  </button>
                  <div>
                    <h1 className="text-lg font-bold text-ghibli-brown leading-tight">ç¾é£Ÿé™„éŒ„</h1>
                    <span className="text-xs text-gray-500">å®Œæ•´è¡¨æ ¼ç‰ˆï½œå«å»ºè­°æ™‚æ®µ</span>
                  </div>
                </div>
                
                <div className="p-4 space-y-6">
                  {/* Intro */}
                  <div className="bg-orange-50 p-3 rounded-lg text-sm text-orange-700 flex gap-2 items-start border border-orange-100 shadow-sm">
                     <Info size={16} className="mt-0.5 shrink-0"/>
                     <p>â— æº«é¦¨æé†’: æ‰€æœ‰åˆ—å‡ºçš„é¤å»³å‡ç‚º<strong>è¦ªå­å‹å–„</strong>ï¼Œå¤§éƒ¨åˆ†æ”¯æ´ä¿¡ç”¨å¡èˆ‡é›»å­æ”¯ä»˜ã€‚</p>
                  </div>

                  {FOOD_APPENDIX_DATA.map((dayData, index) => (
                    <Card key={index} className="overflow-hidden">
                       <div className="flex items-center gap-2 mb-3 pb-2 border-b border-gray-100">
                          <span className="bg-ghibli-brown text-white text-xs font-bold px-2 py-1 rounded">{dayData.day}</span>
                          <h3 className="font-bold text-ghibli-brown">{dayData.title}</h3>
                       </div>
                       
                       <div className="space-y-4">
                         {dayData.items.map((item, i) => (
                           <div key={i} className={`relative pl-3 ${i !== dayData.items.length - 1 ? 'border-b border-dashed border-gray-100 pb-3' : ''}`}>
                             <div className={`absolute left-0 top-1.5 w-1 h-8 rounded-full ${item.primary ? 'bg-orange-400' : 'bg-gray-200'}`}></div>
                             
                             <div className="flex justify-between items-start">
                               <div>
                                 <h4 className={`text-sm ${item.primary ? 'font-bold text-ghibli-brown' : 'font-medium text-gray-700'}`}>
                                   {item.name}
                                 </h4>
                                 <div className="text-xs text-gray-500 mt-0.5">{item.cat}</div>
                               </div>
                               <div className="text-right shrink-0">
                                  <div className="flex items-center justify-end gap-1 text-[10px] text-gray-500 bg-gray-50 px-1.5 py-0.5 rounded mb-1">
                                    <Clock size={10} /> {item.time}
                                  </div>
                                  <div className="text-xs font-mono font-medium text-gray-600">{item.cost}</div>
                               </div>
                             </div>
                             
                             <div className="mt-2 flex flex-wrap gap-1">
                               {item.feat.map((f, fi) => (
                                 <Tag key={fi} color={item.primary ? 'orange' : 'green'}>{f}</Tag>
                               ))}
                             </div>
                           </div>
                         ))}
                       </div>
                    </Card>
                  ))}
                </div>
              </div>
            )}
            
            {/* Complete Map List View */}
            {activeTab === 'FULL_MAP' && (
              <div className="animate-fade-in pb-24 bg-ghibli-cream">
                 <div className="sticky top-0 z-10 bg-ghibli-cream/95 backdrop-blur-sm border-b border-stone-200 px-4 py-4 flex items-center gap-4">
                  <button 
                    onClick={() => setActiveTab('HOME')}
                    className="p-2 -ml-2 rounded-full hover:bg-stone-200 transition-colors"
                  >
                    <ChevronLeft className="text-ghibli-brown" />
                  </button>
                  <div>
                    <h1 className="text-lg font-bold text-ghibli-brown leading-tight">å®Œæ•´è³¼ç‰©åœ°åœ–</h1>
                    <span className="text-xs text-gray-500">è¶…å¸‚ï¼‹è—¥å¦ï¼‹å¹³åƒ¹åº—æ¸…å–®</span>
                  </div>
                </div>

                <div className="px-6 py-6">
                  <div className="space-y-6">
                    {/* Routes */}
                    <div className="bg-white rounded-2xl p-5 shadow-sm border border-ghibli-orange/10 relative overflow-hidden">
                       <div className="absolute top-0 right-0 w-20 h-20 bg-orange-50 rounded-bl-full -mr-10 -mt-10 z-0"></div>
                       <h4 className="font-bold text-ghibli-green text-sm mb-4 flex items-center gap-2 relative z-10">
                         <Footprints size={18} /> æœ€ä½³è£œçµ¦è·¯ç·šå»ºè­°
                       </h4>
                       <div className="space-y-4 relative z-10">
                         {SHOPPING_ROUTES.map((route, idx) => (
                           <div key={idx} className="flex flex-col gap-1 text-sm border-b border-gray-50 last:border-0 pb-2 last:pb-0">
                             <div className="flex items-center justify-between">
                               <span className="font-bold text-ghibli-brown">{route.title}</span>
                               <span className="bg-orange-100 text-orange-700 text-[10px] font-bold px-2 py-0.5 rounded">{route.tag}</span>
                             </div>
                             <span className="text-gray-500 text-xs">{route.desc}</span>
                           </div>
                         ))}
                       </div>
                    </div>

                    {/* Shops List */}
                    <div>
                      <h4 className="font-bold text-ghibli-brown text-sm mb-3 ml-1">å‘¨é‚Šåº—å®¶ä¸€è¦½</h4>
                      <div className="grid gap-3">
                        {SHOPPING_SPOTS.map((shop, idx) => (
                          <div key={idx} className="bg-white p-4 rounded-xl shadow-sm flex justify-between items-center border-l-4 border-l-ghibli-green/30 hover:border-l-ghibli-green transition-all">
                             <div className="flex-1">
                               <div className="flex items-center gap-2 mb-1">
                                 <span className="font-bold text-ghibli-brown">{shop.name}</span>
                                 <span className="text-[10px] bg-ghibli-cream text-ghibli-brown px-1.5 py-0.5 rounded font-mono">{shop.dist}</span>
                               </div>
                               <div className="flex items-center gap-2 flex-wrap mt-1">
                                 <span className="text-[10px] text-gray-500 bg-gray-50 px-1.5 py-0.5 rounded border border-gray-100">{shop.tag}</span>
                                 {shop.note && <span className="text-[10px] text-red-500 font-medium">â€¢ {shop.note}</span>}
                               </div>
                             </div>
                             <button onClick={() => handleNavClick(shop.navLink)} className="p-2 text-blue-500 bg-blue-50 rounded-full hover:bg-blue-100 transition-colors ml-2 shrink-0">
                               <Navigation size={18} />
                             </button>
                          </div>
                        ))}
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            )}
            
            {/* Taiko Shopping View */}
            {activeTab === 'TAIKO_SHOPPING' && (
              <div className="animate-fade-in pb-24 bg-ghibli-cream">
                 <div className="sticky top-0 z-10 bg-ghibli-cream/95 backdrop-blur-sm border-b border-stone-200 px-4 py-4 flex items-center gap-4">
                  <button 
                    onClick={() => setActiveTab('HOME')}
                    className="p-2 -ml-2 rounded-full hover:bg-stone-200 transition-colors"
                  >
                    <ChevronLeft className="text-ghibli-brown" />
                  </button>
                  <div>
                    <h1 className="text-lg font-bold text-ghibli-brown leading-tight">åå¤å±‹ç«™å¤ªé–¤é€šå£</h1>
                    <span className="text-xs text-gray-500">è¶…å¸‚ï¼†å¤§å‹å¹³åƒ¹å•†åº—ç¸½æ•´ç†</span>
                  </div>
                </div>

                <div className="px-6 py-6 space-y-8">
                  
                  {/* Intro */}
                  <div className="bg-blue-50 p-3 rounded-lg text-sm text-blue-700 flex gap-2 items-start border border-blue-100 shadow-sm">
                     <Info size={16} className="mt-0.5 shrink-0"/>
                     <p>ä»¥ä¸‹åå–®çš†æ˜¯<strong>å¾æ‚¨é£¯åº—æ­¥è¡Œå¯é”</strong>æˆ–åœ°éµä¸€ç«™å…§ï¼Œéå¸¸é©åˆæ‚¨åœ¨ D1ã€D2ã€D7 æ™šä¸Šé€²è¡Œè£œçµ¦ã€‚</p>
                  </div>

                  {/* Shops Table (as cards) */}
                  <div>
                    <h3 className="font-bold text-ghibli-brown text-lg flex items-center gap-2 mb-4">
                      <Store size={20} className="text-pink-500"/> è£œçµ¦åœ°åœ–ç¸½è¦½
                    </h3>
                    <div className="grid gap-3">
                        {TAIKO_SHOPS_DATA.map((shop, idx) => (
                          <div key={idx} className="bg-white p-4 rounded-xl shadow-sm flex justify-between items-center border-l-4 border-l-pink-300/30 hover:border-l-pink-400 transition-all">
                             <div className="flex-1">
                               <div className="flex items-center gap-2 mb-1">
                                 <span className="font-bold text-ghibli-brown">{shop.name}</span>
                                 <span className="text-[10px] bg-ghibli-cream text-ghibli-brown px-1.5 py-0.5 rounded font-mono">{shop.dist}</span>
                               </div>
                               <div className="text-xs text-gray-600 mb-1">{shop.pros}</div>
                               <div className="flex items-center gap-2 flex-wrap mt-1">
                                 <span className="text-[10px] text-gray-500 bg-gray-50 px-1.5 py-0.5 rounded border border-gray-100">{shop.type}</span>
                                 {shop.note && <span className="text-[10px] text-red-500 font-bold bg-red-50 px-1.5 py-0.5 rounded">â€¢ {shop.note}</span>}
                               </div>
                             </div>
                             <button onClick={() => handleNavClick(shop.navLink)} className="p-2 text-blue-500 bg-blue-50 rounded-full hover:bg-blue-100 transition-colors ml-2 shrink-0">
                               <Navigation size={18} />
                             </button>
                          </div>
                        ))}
                    </div>
                  </div>

                  {/* Routes */}
                  <div className="bg-white rounded-2xl p-5 shadow-sm border border-ghibli-orange/10 relative overflow-hidden">
                       <div className="absolute top-0 right-0 w-20 h-20 bg-orange-50 rounded-bl-full -mr-10 -mt-10 z-0"></div>
                       <h3 className="font-bold text-ghibli-green text-lg mb-4 flex items-center gap-2 relative z-10">
                         <Footprints size={20} /> æœ€ä½³è£œçµ¦è·¯ç·šå»ºè­°
                       </h3>
                       <div className="space-y-4 relative z-10">
                         {TAIKO_ROUTES_DATA.map((route, idx) => (
                           <div key={idx} className="flex flex-col gap-1 text-sm border-b border-gray-50 last:border-0 pb-4 last:pb-0">
                             <div className="flex items-center justify-between mb-1">
                               <span className="font-bold text-ghibli-brown text-base">{route.title}</span>
                               {route.tag && <span className="bg-orange-100 text-orange-700 text-[10px] font-bold px-2 py-0.5 rounded">{route.tag}</span>}
                             </div>
                             <div className="flex items-center gap-2 text-xs font-mono bg-gray-50 p-2 rounded text-gray-700 mb-1">
                                <MapPin size={12}/> {route.path}
                             </div>
                             <span className="text-gray-500 text-xs leading-relaxed">{route.desc}</span>
                           </div>
                         ))}
                       </div>
                  </div>

                  {/* Donki List */}
                  <div className="bg-yellow-50/80 rounded-2xl p-5 shadow-sm border border-yellow-200">
                    <h3 className="font-bold text-yellow-800 text-lg mb-2 flex items-center gap-2">
                       <ShoppingBag size={20} /> DONKI å¿«é€Ÿæ¡è²·æ‡¶äººåŒ…
                    </h3>
                    <p className="text-xs text-yellow-700/80 mb-4">æ¦®æœ¬åº—/åç«™è¥¿åº—çš†é©ç”¨ï¼Œ20 åˆ†é˜å¿«é€Ÿæ¡è³¼æ¸…å–®ã€‚</p>
                    
                    <div className="space-y-4">
                      {DONKI_LIST_DATA.map((category, idx) => (
                        <div key={idx} className="bg-white rounded-xl p-3 shadow-sm">
                           <h4 className="font-bold text-ghibli-brown text-sm mb-2 pb-1 border-b border-gray-100">{category.category}</h4>
                           <ul className="space-y-2">
                             {category.items.map((item, i) => (
                               <li key={i} className="flex items-start gap-2 text-xs text-gray-700">
                                 <CheckCircle size={14} className="text-yellow-500 shrink-0 mt-0.5"/>
                                 <span>{item}</span>
                               </li>
                             ))}
                           </ul>
                        </div>
                      ))}
                    </div>
                  </div>

                </div>
              </div>
            )}

            {/* Tools View */}
            {activeTab === 'TOOLS' && (
              <div className="animate-fade-in">
                  <ToolsView />
              </div>
            )}

            {/* Bottom Nav */}
            <div className="fixed bottom-6 left-1/2 -translate-x-1/2 w-[90%] max-w-sm bg-white/90 backdrop-blur-md shadow-2xl rounded-full p-2 flex justify-between items-center border border-gray-100 z-50">
              <button 
                  onClick={() => { setActiveTab('HOME'); setSelectedDayId(null); }}
                  className={`flex-1 flex flex-col items-center py-2 rounded-full transition-all ${activeTab === 'HOME' ? 'text-ghibli-green bg-green-50' : 'text-gray-400'}`}
              >
                  <Calendar size={20} />
                  <span className="text-[10px] font-bold mt-0.5">è¡Œç¨‹</span>
              </button>
              <div className="w-px h-8 bg-gray-200"></div>
              <button 
                  onClick={() => setActiveTab('TOOLS')}
                  className={`flex-1 flex flex-col items-center py-2 rounded-full transition-all ${activeTab === 'TOOLS' ? 'text-ghibli-orange bg-orange-50' : 'text-gray-400'}`}
              >
                  <MapPin size={20} />
                  <span className="text-[10px] font-bold mt-0.5">å·¥å…·ç®±</span>
              </button>
            </div>
          </div>
        );
      };

      const root = createRoot(document.getElementById('root'));
      root.render(<App />);
    </script>
</body>
</html>